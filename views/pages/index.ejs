<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Rigalma</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://fonts.googleapis.com/css2?family=Arima:wght@100;200;300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://site-assets.fontawesome.com/releases/v6.4.2/css/all.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link href="/public/css/style.css" rel="stylesheet" />
    <link href="/public/css/responsive.css" rel="stylesheet" />
  </head>

  <body>
    <%- include('../partials/navbar')%>

    <div class="slider-container">
      <div class="sliderOvelay">
        <div class="container">
          <div class="mainContent">
            <div class="w-50">
              <!-- <h3>If you are planning for a year, <span>saw rice.</span></h3>
                  <h3>If you are planning for a decade, <span>plant trees.</span></h3>
                  <h3>If you are planning for a lifetime, <span>educate people!"</span></h3>
                  <div class="mt-5 mx-2">
                     <a href="#!" class="consultationBtn">Need Counselling</a>
                  </div> -->
            </div>
            <div class="w-50">
              <form class="searchState">
                <i class="fa-regular fa-magnifying-glass"></i>
                <input
                  type="text"
                  placeholder="Search for colleges, exams, course and more..."
                />
                <a href="" class="submitBtn">Search</a>
              </form>
            </div>
          </div>
        </div>
        <% slider.forEach(function(slider){ %>
        <div
          class="slide"
          style="background-image: url('<%=slider.image%>')"
        ></div>
        <% }) %>

        <div class="controls-container">
          <% slider.forEach(function(slider){ %>
          <div class="control"></div>
          <% }) %>
          <!-- <div class="control"></div> -->
          <!-- <div class="control"></div> -->
        </div>
      </div>
    </div>

    <section class="studyGoal">
      <div class="container">
        <div class="studyGoalTitle">
          <h3>Select Your Study Goal</h3>
        </div>
        <div class="PartnersSlider slider">
          <div class="slide1">
            <h4>Engineering</h4>
            <h5>6124 Colleges</h5>
            <p>BE/B.Tech</p>
            <p>Diploma In Engineering</p>
            <p>ME/M.Tech</p>
          </div>
          <div class="slide1">
            <h4>Engineering</h4>
            <h5>6124 Colleges</h5>
            <p>BE/B.Tech</p>
            <p>Diploma In Engineering</p>
            <p>ME/M.Tech</p>
          </div>
          <div class="slide1">
            <h4>Engineering</h4>
            <h5>6124 Colleges</h5>
            <p>BE/B.Tech</p>
            <p>Diploma In Engineering</p>
            <p>ME/M.Tech</p>
          </div>
          <div class="slide1">
            <h4>Engineering</h4>
            <h5>6124 Colleges</h5>
            <p>BE/B.Tech</p>
            <p>Diploma In Engineering</p>
            <p>ME/M.Tech</p>
          </div>
          <div class="slide1">
            <h4>Engineering</h4>
            <h5>6124 Colleges</h5>
            <p>BE/B.Tech</p>
            <p>Diploma In Engineering</p>
            <p>ME/M.Tech</p>
          </div>
          <div class="slide1">
            <h4>Engineering</h4>
            <h5>6124 Colleges</h5>
            <p>BE/B.Tech</p>
            <p>Diploma In Engineering</p>
            <p>ME/M.Tech</p>
          </div>
          <div class="slide1">
            <h4>Engineering</h4>
            <h5>6124 Colleges</h5>
            <p>BE/B.Tech</p>
            <p>Diploma In Engineering</p>
            <p>ME/M.Tech</p>
          </div>
          <div class="slide1">
            <h4>Engineering</h4>
            <h5>6124 Colleges</h5>
            <p>BE/B.Tech</p>
            <p>Diploma In Engineering</p>
            <p>ME/M.Tech</p>
          </div>
          <div class="slide1">
            <h4>Engineering</h4>
            <h5>6124 Colleges</h5>
            <p>BE/B.Tech</p>
            <p>Diploma In Engineering</p>
            <p>ME/M.Tech</p>
          </div>
        </div>
      </div>
    </section>

    <section class="topCollections">
      <div class="container">
        <div
          class="collections d-flex align-items-center justify-content-between"
        >
          <h3>Top College for <%=topCourseCategory[0]?.category%></h3>
          <div>
            <a
              href="/collegeGetByCourseId/<%=college[0]?.courseDetail[0]?.slag%>"
              class="viewAllBtn"
              >View All <i class="fa-light fa-arrow-right"></i
            ></a>
          </div>
        </div>
        <div class="row mt-3">
          <% topCourseCategory[0]?.collegeDetail?.forEach(function(d){ %>

          <a href="/collegeDetail/<%=d.slag%>/overView" class="col-md-3 my-3">
            <div class="collectionCard">
              <div class="collectionImg">
                <img src="<%=d.image%>" />
              </div>
              <div class="collectionText">
                <div class="d-flex align-items-center justify-content-between">
                  <h5><%=d.name%></h5>
                  <p>+8 More</p>
                </div>
                <% d?.stateDetail.forEach(function(state){ %>
                <h4><%=state?.name%></h4>
                <% }) %>
              </div>
            </div>
          </a>

          <% }) %>
        </div>
      </div>
    </section>
    <section class="border-top">
      <div class="container">
        <div class="manePageBanner">
          <div class="row align-items-center">
            <div class="col-md-10">
              <div class="d-flex align-items-center">
                <h2 class="m-0 mx-3">Subscribe For Regular Alerts</h2>
                <a href="#!" class="compareClgBtn">Subscribe Now</a>
              </div>
            </div>
            <div class="col-md-2">
              <div>
                <img src="/public/images/subscribeImg.png" class="w-75" />
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="explorePrograms border-top">
      <div class="container">
        <div class="programs">
          <h3>Explore Programs</h3>
        </div>
        <div class="row mt-5">
          <div class="col-md-3 my-3">
            <div class="programCard">
              <div class="programIcon">
                <img src="/public/images/test.png" />
              </div>
              <h4>Exams</h4>
              <p>Compare on the basis of rank, fess, etc.</p>
              <a href="#!"
                >Top Ranked College in India |
                <i class="fa-light fa-arrow-right"></i
              ></a>
            </div>
          </div>
          <div class="col-md-3 my-3">
            <div class="programCard">
              <div class="programIcon">
                <img src="/public/images/trophy.png" />
              </div>
              <h4>Ranking</h4>
              <p>Compare on the basis of rank, fess, etc.</p>
              <a href="#!"
                >Top Ranked College in India |
                <i class="fa-light fa-arrow-right"></i
              ></a>
            </div>
          </div>
          <div class="col-md-3 my-3">
            <div class="programCard">
              <div class="programIcon">
                <img src="/public/images/search.png" />
              </div>
              <h4>Find College</h4>
              <p>Compare on the basis of rank, fess, etc.</p>
              <a href="#!"
                >Top Ranked College in India |
                <i class="fa-light fa-arrow-right"></i
              ></a>
            </div>
          </div>
          <div class="col-md-3 my-3">
            <div class="programCard">
              <div class="programIcon">
                <img src="/public/images/file-sharing.png" />
              </div>
              <h4>Compare College</h4>
              <p>Compare on the basis of rank, fess, etc.</p>
              <a href="#!" class="compareClgBtn"
                >Compare Colleges | <i class="fa-light fa-arrow-right"></i
              ></a>
            </div>
          </div>
          <div class="col-md-3 my-3">
            <div class="programCard">
              <div class="programIcon">
                <img src="/public/images/test.png" />
              </div>
              <h4>Exams</h4>
              <p>Compare on the basis of rank, fess, etc.</p>
              <a href="#!"
                >Top Ranked College in India |
                <i class="fa-light fa-arrow-right"></i
              ></a>
            </div>
          </div>
          <div class="col-md-3 my-3">
            <div class="programCard">
              <div class="programIcon">
                <img src="/public/images/trophy.png" />
              </div>
              <h4>Ranking</h4>
              <p>Compare on the basis of rank, fess, etc.</p>
              <a href="#!"
                >Top Ranked College in India |
                <i class="fa-light fa-arrow-right"></i
              ></a>
            </div>
          </div>
          <div class="col-md-3 my-3">
            <div class="programCard">
              <div class="programIcon">
                <img src="/public/images/search.png" />
              </div>
              <h4>Find College</h4>
              <p>Compare on the basis of rank, fess, etc.</p>
              <a href="#!"
                >Top Ranked College in India |
                <i class="fa-light fa-arrow-right"></i
              ></a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="topColleges border-top">
      <div class="container">
        <div class="colleges">
          <h3>Top 10 Colleges</h3>
        </div>
        <div class="d-flex align-items-center justify-content-end">
          <form class="searchState">
            <i class="fa-regular fa-magnifying-glass"></i>
            <input type="text" placeholder="Search" />
            <a href="" class="submitBtn">Search</a>
          </form>
        </div>
        <div class="row stateList">
          <div class="col-md-3">
            <h4>Popular States</h4>
            <ul class="popularStateList">
              <% state.forEach(function(state){ %>
              <li onclick="getCollegeByState('<%= state._id%>')">
                <%=state.name%>
              </li>
              <% }) %>
            </ul>
          </div>
          <div class="col-md-9">
            <div class="collegeTable">
              <table class="table table-striped table-responsive">
                <thead style="background-color: #88bdc4">
                  <tr>
                    <th>Rank</th>
                    <th>College</th>
                    <th>Ranking</th>
                    <th>Cutoff</th>
                    <th style="width: 150px">Application Deadline</th>
                    <th>Fees</th>
                  </tr>
                </thead>
                <tbody id="collegeList">
                  <tr>
                    <td>#1</td>
                    <td>
                      All India Institute of Medical Sciences - [AIIMS] New
                      Delhi,Delhi NCR|9.8/10
                    </td>
                    <td>ranking-logo #3 out of 57 in India 2023</td>
                    <td>NEET 2023 Cut off 57</td>
                    <td>15 June - 26 Sept 2023</td>
                    <td style="position: relative">
                      ₹1,628 1st Year Fees
                      <div class="wishdropdown">
                        <i
                          onclick="myFunction()"
                          class="fa-solid fa-ellipsis-vertical wishdropbtn"
                        ></i>
                        <div id="mywishDropdown" class="wishdropdown-content">
                          <a href="#!">Add to Wishlist</a>
                        </div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>#1</td>
                    <td>
                      All India Institute of Medical Sciences - [AIIMS] New
                      Delhi,Delhi NCR|9.8/10
                    </td>
                    <td>ranking-logo #3 out of 57 in India 2023</td>
                    <td>NEET 2023 Cut off 57</td>
                    <td>15 June - 26 Sept 2023</td>
                    <td style="position: relative">
                      ₹1,628 1st Year Fees
                      <div class="wishdropdown">
                        <i
                          onclick="myFunction()"
                          class="fa-solid fa-ellipsis-vertical wishdropbtn"
                        ></i>
                        <div id="mywishDropdown" class="wishdropdown-content">
                          <a href="#!">Add to Wishlist</a>
                        </div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>#1</td>
                    <td>
                      All India Institute of Medical Sciences - [AIIMS] New
                      Delhi,Delhi NCR|9.8/10
                    </td>
                    <td>ranking-logo #3 out of 57 in India 2023</td>
                    <td>NEET 2023 Cut off 57</td>
                    <td>15 June - 26 Sept 2023</td>
                    <td style="position: relative">
                      ₹1,628 1st Year Fees
                      <div class="wishdropdown">
                        <i
                          onclick="myFunction()"
                          class="fa-solid fa-ellipsis-vertical wishdropbtn"
                        ></i>
                        <div id="mywishDropdown" class="wishdropdown-content">
                          <a href="#!">Add to Wishlist</a>
                        </div>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="freeConsultation">
      <div class="container">
        <div
          class="consultation d-flex align-items-center justify-content-between"
        >
          <h3>
            Find your course with our
            <p>Free Consultation</p>
          </h3>
          <a href="#!" class="consultationBtn">Free Consultation</a>
        </div>
      </div>
    </section>

    <section class="exploreCareers">
      <div class="container">
        <div class="explore">
          <h3>Explore Careers</h3>
          <p class="pt-3">
            Explore your preferred streams to learn about the relevant colleges,
            exams and more!
          </p>
        </div>
        <div class="wrapper">
          <div class="icon">
            <i id="left" class="fa-solid fa-angle-left"></i>
          </div>
          <ul class="tabs-box">
            <% courseCategoryData.forEach(function(courseCategoryData){ %>
            <li class="tab" onclick="getcollege('<%=courseCategoryData._id%>')">
              <%=courseCategoryData.category%>
            </li>
            <% }) %>
          </ul>
          <div class="icon">
            <i id="right" class="fa-solid fa-angle-right"></i>
          </div>
        </div>
        <div class="PartnersSlider slider" id="getCollegeByCourseCategory">
          <% collegeData[0]?.collegeDetail.forEach(function(d){ %>
          <div class="col-md-3 my-3">
            <div class="collectionCard">
              <div class="collectionImg">
                <img src="<%=d.image%>" />
              </div>
              <div class="collectionText">
                <div class="d-flex align-items-center justify-content-between">
                  <h5><%=d.name%></h5>
                  <!-- <p>+8 More</p> -->
                </div>
                <% d?.stateDetail.forEach(function(state){ %>

                <h4><%=state.name%></h4>
                <% }) %>
              </div>
            </div>
          </div>
          <% }) %>
        </div>
      </div>
    </section>

    <section class="subscribeSec">
      <div class="container">
        <div class="subscribe">
          <h3>Subscribe To Our News Letter</h3>
          <p class="pt-3">
            Get College Notifications, Exam Notifications and News Updates
          </p>
          <form class="form-card">
            <div class="d-flex">
              <input
                type="text"
                id="fname"
                name="fname"
                placeholder="Email address"
              />
              <input
                type="text"
                id="mobile"
                name="mobile"
                placeholder="Mobile no"
              />
              <select class="form-select" aria-label="Choose your course">
                <option selected>Choose your course</option>
                <option value="1">Teacher</option>
                <option value="2">School Admin</option>
                <option value="3">Principal</option>
                <option value="4">School Owner</option>
                <option value="5">Parent</option>
              </select>
              <div class="text-center mx-2">
                <a href="#!" type="submit" class="submitBtn">Submit</a>
              </div>
            </div>
          </form>
        </div>
      </div>
    </section>

    <%- include('../partials/footer')%>

    <script type="text/javascript" src="/public/js/jquery.min.js"></script>
    <script type="text/javascript" src="/public/js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
    <script
      src="https://code.jquery.com/jquery-2.2.0.min.js"
      type="text/javascript"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.6.0/slick.js"></script>
  </body>

  <script>
    function getCollegeByState(id) {
      console.log(id);

      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
          // document.getElementById("demo").innerHTML =
          // this.responseText;
          console.log(this.responseText);
          var data = JSON.parse(this.responseText);

          console.log(data);

          document.getElementById("collegeList").innerHTML = data
            .map((data, i) => {
              return `
   <tr>
      <td>${i + 1}</td>
      <td>${data.name}</td>
      <td>${data.ranking}</td>
      <td>${data.cutOff}</td>
      <td>${data.applicationDate}</td>
      <td style="position: relative;">
         ₹${data.feesRange} Fees
         <div class="wishdropdown">
            <i onclick="myFunction()" class="fa-solid fa-ellipsis-vertical wishdropbtn"></i>
            <div id="mywishDropdown" class="wishdropdown-content">
               <a href="#!">Add to Wishlist</a>
            </div>
         </div>
      </td>
   </tr>
   `;
            })
            .join("");
        }
      };
      xhttp.open("GET", `/getCollegeByStateId?stateId=${id}`, true);
      xhttp.send();
    }
  </script>

  <script>
    // onclick on getcollege get college by course id and put in slider

    function getcollege(id){

          console.log(id);


          var xhttp = new XMLHttpRequest();
             xhttp.onreadystatechange = function () {
             if (this.readyState == 4 && this.status == 200) {
                // document.getElementById("demo").innerHTML =
                // this.responseText;
                console.log(this.responseText);
                var data = JSON.parse(this.responseText);

                console.log(data);


      // paste data in slider with slider functionality


      document.getElementById("getCollegeByCourseCategory").innerHTML = data[0]?collegeDetail.map((collegeDetail,i)=>{
        return `
        <div class="col-md-3 my-3">
        <div class="collectionCard">
          <div class="collectionImg">

            <img src="${collegeDetail.image}" />
          </div>
          <div class="collectionText">
            <div class="d-flex align-items-center justify-content-between">
              <h5>${collegeDetail.name}</h5>
              <!-- <p>+8 More</p> -->

            </div>
            ${collegeDetail.stateDetail.map((state)=>{
              return `
              <h4>${state.name}</h4>
              `
            }).join('')}
          </div>
        </div>
      </div>
        `
      }).join('')

    }
  };  


   
      
 
             
        
      


            



         

                xhttp.open("GET", `/getCollegeByCourseId?courseCategoryId=${id}`, true);

                xhttp.send();
             }
  </script>
</html>
